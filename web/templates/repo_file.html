{{ define "repo_file" }}
<html>
  <head>
    {{ template "head" . }}
    <title>{{ .name }}: {{ .path }} ({{ .ref }})</title>
  </head>
  <body>
    {{ template "repo_header" . }}
    <main>
      <p>{{ .path }} (<a class="muted" href="?raw=true">view raw</a>)</p>
      <div class="file-wrapper">
        {{ if .is_image }}
        <div class="image-viewer">
          <p>{{.mime_type}} â€¢ {{.size}} bytes</p>
          <img src="?raw=true" alt="{{- .path -}}">
        </div>
        {{ else if .is_binary }}
        <div class="binary-viewer">
          <p>Binary file ({{.mime_type}})</p>
          <p>Size: {{.size}} bytes</p>
          <a class="link" href="?raw=true" download>[ Download ]</a>
        </div>
        {{ else }}
        <table>
          <tbody><tr>
            <td class="line-numbers">
              <pre>{{- range .linecount }}
<a id="L{{ . }}" href="#L{{ . }}">{{ . }}</a>
{{- end -}}</pre>
            </td>
            <td class="file-content">
              <pre>{{- .content -}}</pre>
            </td>
          </tbody></tr>
        </table>
        {{ end }}
      </div>
    </main>
  </body>
</html>
{{ end }}
